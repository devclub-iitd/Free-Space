<!DOCTYPE html>
    <head>
        <title>Free Space</title>
        <script src ="jquery-3.3.1.js"></script>
        <script src = "merger.js"></script>
        <script src ="scraper.js"></script>
        <script>
            var d = new Date();
            var n = d.getDay();
            var h = d.getHours();
            var dic = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday"];

            function latestSmallTable(){
                if (h < 7){
                    h = 7;
                } else if(h > 17){
                    h  = 17;
                };
                var day;
                if (n == 0){    //Sunday
                    day = dic[n+1];
                } else if(n == 6){  //Saturday
                    day = dic[n-1];                        
                }else{
                    day = dic[n];
                }
                accessByDOM("smallTables/"+day+"/"+(h+1)+":00.html","smallOnes");
                accessByDOM("smallTables/"+day+"/"+(h+1)+":30.html","smallOnesAfterHalf");
                document.getElementById("heading1").innerText = 'Empty Classrooms from '+(h+1)+":00";
                document.getElementById("heading2").innerText = 'Empty Classrooms from '+(h+1)+":30";

            }
            function allFunctionRun(){
                returnCurrDayTT()
                accessByDOM("timewise.html","allRooms");
                latestSmallTable();
            }
            function returnCurrDayTT(t){
                var day;
                if (t){
                    day = dic[t];
                } else{
                    if (n == 0){    //Sunday
                        day = dic[n+1];
                    } else if(n == 6){  //Saturday
                        day = dic[n-1];                        
                    }else{
                        day = dic[n];
                    }
                }
                document.getElementById("currDay").innerHTML = day+"'s Free Space";
                accessByDOM("dayWiseTables/"+day+".html","storage");
                try{
                    setTimeout(function(){
                    merge();
                    // allRoomMerge();
                    smallTableEdit("smallOnes");
                    smallTableEdit("smallOnesAfterHalf");

                    },100);
                }catch(err){
                    setTimeout(function(){
                    // allRoomMerge();
                    merge();
                    smallTableEdit("smallOnes");
                    smallTableEdit("smallOnesAfterHalf");
                },200);
                }
                finally{}                
            }
        </script>
        <link rel="stylesheet" href="style.css">
    </head>
    <body onload="allFunctionRun()">
        <header class ="Header">
            <h1>Free Space</h1>
            <div id = "currDay"></div>
        </header> 
            <div id = "hourly_change">
                <table class="halfHourWrapper">
                    <tr>
                            <th class = "small">
                                <div id="heading1"></div>
                            </th>
                
                            <th class = "small">
                                <div id="heading2"></div>
                            </th>
                    </tr>
                    <tr class = "halfHourData">
                        <td>
                            <div id = "smallOnes"></div>
                        </td>
                        <td>
                            <div id = "smallOnesAfterHalf"></div>
                        </td>
                    </tr>
                </table>
            </div>
            <br>
            
            <div id="storage"></div>
            <br>
            <div id = "buttons">
                <button class = "button button5" onclick="returnCurrDayTT(1)">Monday</button>
                <button class = "button button5" onclick="returnCurrDayTT(2)">Tuesday</button>
                <button class = "button button5" onclick="returnCurrDayTT(3)">Wednesday</button>
                <button class = "button button5" onclick="returnCurrDayTT(4)">Thursday</button>
                <button class = "button button5" onclick="returnCurrDayTT(5)">Friday</button>
            </div>
            <!-- <div class = "heading">
                <h3>All Rooms</h3>
            </div> -->
            <!-- <div id="allRooms"></div> -->
        <script>
        </script>
    </body>
</html>
